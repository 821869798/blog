<h1 id="18-一行式"><a href="#18-一行式" class="headerlink" title="18. 一行式"></a>18. 一行式</h1><p>本章节,我将向大家展示一些一行式的Python命令，这些程序将对你非常有帮助。</p>
<p><strong>简易Web Server</strong></p>
<p>你是否想过通过网络快速共享文件？好消息，Python为你提供了这样的功能。进入到你要共享文件的目录下并在命令行中运行下面的代码：</p>
<pre><code class="sh"><span class="comment"># Python 2</span>
python -m SimpleHTTPServer

<span class="comment"># Python 3</span>
python -m http.server</code></pre>
<p><strong>漂亮的打印</strong></p>
<p>你可以在Python REPL漂亮的打印出列表和字典。这里是相关的代码：</p>
<pre><code class="python"><span class="keyword">from</span> pprint <span class="keyword">import</span> pprint

my_dict = {<span class="string">'name'</span>: <span class="string">'Yasoob'</span>, <span class="string">'age'</span>: <span class="string">'undefined'</span>, <span class="string">'personality'</span>: <span class="string">'awesome'</span>}
pprint(my_dict)
</code></pre>
<p>这种方法在字典上更为有效。此外，如果你想快速漂亮的从文件打印出json数据，那么你可以这么做：</p>
<pre><code class="sh">cat file.json | python -m json.tool</code></pre>
<p><strong>脚本性能分析</strong><br>这可能在定位你的脚本中的性能瓶颈时，会非常奏效：</p>
<pre><code class="sh">python -m cProfile my_script.py</code></pre>
<p>备注：<code>cProfile</code>是一个比<code>profile</code>更快的实现，因为它是用c写的</p>
<p><strong>CSV转换为json</strong></p>
<p>在命令行执行这条指令</p>
<pre><code class="sh">python -c <span class="string">"import csv,json;print json.dumps(list(csv.reader(open('csv_file.csv'))))"</span></code></pre>
<p>确保更换<code>csv_file.csv</code>为你想要转换的csv文件</p>
<p><strong>列表辗平</strong></p>
<p>您可以通过使用<code>itertools</code>包中的<code>itertools.chain.from_iterable</code>轻松快速的辗平一个列表。下面是一个简单的例子：</p>
<pre><code class="python">a_list = [[<span class="number">1</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">4</span>], [<span class="number">5</span>, <span class="number">6</span>]]
print(list(itertools.chain.from_iterable(a_list)))
<span class="comment"># Output: [1, 2, 3, 4, 5, 6]</span>

<span class="comment"># or</span>
print(list(itertools.chain(*a_list)))
<span class="comment"># Output: [1, 2, 3, 4, 5, 6]</span></code></pre>
<p><strong>一行式的构造器</strong></p>
<p>避免类初始化时大量重复的赋值语句</p>
<pre><code class="python"><span class="class"><span class="keyword">class</span> <span class="title">A</span><span class="params">(object)</span>:</span>
    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, a, b, c, d, e, f)</span>:</span>
        self.__dict__.update({k: v <span class="keyword">for</span> k, v <span class="keyword">in</span> locals().items() <span class="keyword">if</span> k != <span class="string">'self'</span>})</code></pre>
<p>更多的一行方法请参考<a href="https://wiki.python.org/moin/Powerful%20Python%20One-Liners">Python官方文档</a>。</p>
